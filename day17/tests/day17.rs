use day17::Reservoir;

#[test]
fn example() {
    let input = [
        "x=495, y=2..7",
        "y=7, x=495..501",
        "x=501, y=3..7",
        "x=498, y=2..4",
        "x=506, y=1..2",
        "x=498, y=10..13",
        "x=504, y=10..13",
        "y=13, x=498..504",
    ]
    .join("\n");

    let mut reservoir: Reservoir = input.parse().unwrap();
    reservoir.fill();
    assert_eq!(reservoir.total_wet(), 57);
    assert_eq!(reservoir.total_retained_water(), 29);
}

#[test]
fn large_example() {
    let input = [
        "y=41, x=477..495",
        "y=59, x=494..496",
        "x=559, y=39..53",
        "x=369, y=37..52",
        "x=523, y=15..28",
        "y=23, x=357..371",
        "x=477, y=31..41",
        "y=64, x=494..496",
        "x=510, y=53..67",
        "x=365, y=59..63",
        "y=53, x=538..559",
        "x=371, y=10..23",
        "y=42, x=501..519",
        "x=488, y=5..16",
        "x=506, y=28..39",
        "x=492, y=5..16",
        "x=357, y=9..23",
        "y=46, x=345..348",
        "x=444, y=22..34",
        "x=374, y=38..52",
        "x=348, y=19..46",
        "x=501, y=30..42",
        "x=495, y=31..41",
        "y=48, x=428..448",
        "y=16, x=488..492",
        "x=483, y=7..19",
        "x=403, y=20..44",
        "x=351, y=58..63",
        "x=448, y=39..48",
        "y=19, x=483..501",
        "x=494, y=59..64",
        "x=488, y=53..67",
        "y=28, x=523..531",
        "x=428, y=39..48",
        "y=52, x=369..374",
        "y=39, x=506..509",
        "y=44, x=396..403",
        "x=496, y=59..64",
        "y=67, x=488..510",
        "x=501, y=8..19",
        "y=63, x=351..365",
        "x=509, y=28..39",
        "y=34, x=444..468",
        "x=468, y=23..34",
        "x=519, y=31..42",
        "x=396, y=20..44",
        "x=345, y=18..46",
        "x=531, y=15..28",
        "x=538, y=39..53",
    ]
    .join("\n");

    let mut reservoir: Reservoir = input.parse().unwrap();
    reservoir.fill();
    assert_eq!(reservoir.total_wet(), 572);
    assert_eq!(reservoir.total_retained_water(), 456);
}
